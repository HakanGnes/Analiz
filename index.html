<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Veri Dedektifi Oyunu</title>
  <meta name="viewport" content="width=960, initial-scale=1">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
  <style>
    html, body {
      width: 100vw; height: 100vh; margin: 0; padding: 0; overflow: hidden;
      background: #f9f6ed;
    }
    body {
      min-width: 960px; min-height: 540px;
      display: flex; align-items: center; justify-content: center;
    }
    .mainwrap {
      width: 960px; height: 540px;
      display: flex; align-items: center; justify-content: center;
    }
    .container {
      width: 890px; height: 500px; margin: 0 auto;
      background: #fff; border-radius: 32px;
      box-shadow: 0 6px 40px #e2d5ba85, 0 0px 0px #fff;
      padding: 40px 48px;
      display: flex; flex-direction: column; align-items: center;
      position: relative;
      transition: box-shadow .25s;
      font-family: 'Quicksand', Arial, sans-serif;
    }
    h1 {
      font-size: 2.4rem; color: #27355d; font-weight: 700;
      margin-bottom: 12px; letter-spacing: -1px;
      text-shadow: 0 2px 10px #ebdebc2c;
    }
    h2 {
      font-size: 1.32rem; color: #1976d2; margin: 16px 0 10px 0;
      font-weight: 700;
    }
    table {
      width: 90%; margin: 1em auto; border-collapse: collapse;
      background: #f9f6ed;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 2px 18px #f1eadc66;
    }
    th, td {
      border: 1px solid #ece1c7; padding: 10px 12px;
      text-align: center; font-size: 1.04rem;
    }
    th {
      background: #eae2c8; color: #947a45;
      font-weight: 700;
    }
    button {
      display: inline-block; margin-top: 16px;
      background: linear-gradient(90deg, #fae1a1 0%, #f1b359 100%);
      color: #6d5b28; font-size: 1.12rem; font-weight: 700;
      padding: .68rem 2.2rem;
      border: none; border-radius: 16px; box-shadow: 0 2px 18px #fae1a1ab;
      transition: background .2s, transform .2s;
      letter-spacing: 1px;
    }
    button:hover:enabled { background: #ffe7b4; transform: scale(1.04);}
    button:disabled { background: #e9e0c7; color: #bbb;}
    .card {
      background: #f9f6ed;
      border-radius: 15px;
      padding: 14px 18px;
      box-shadow: 0 2px 10px #e2d5ba60;
      margin: 12px 0 18px 0;
      width: 93%;
      font-size: 1.08rem;
    }
    label { margin-bottom: 6px; display: block; font-size: 1.03rem;}
    input[type=radio], select { margin-right: 8px; }
    .hide { display: none !important; }
    .correct { color: #219859; font-weight: 700;}
    .wrong { color: #e34627; font-weight: 700;}
    .score {
      font-weight: 700; color: #dfa20b;
      font-size: 1.12rem;
      position: absolute; top: 26px; right: 44px;
      background: #f9f6ed; padding: 8px 26px; border-radius: 40px;
      box-shadow: 0 2px 12px #f7e3b140;
      letter-spacing: 1px;
    }
    .transition {
      opacity: 0; transform: scale(.97);
      transition: opacity .3s, transform .2s;
    }
    .show {
      opacity: 1 !important; transform: scale(1) !important;
      transition: opacity .5s, transform .33s cubic-bezier(.44,1.4,.46,1.01);
    }
    .chartwrap { margin: 12px 0 18px 0; width: 400px; height: 220px; background: #f9f6ed; border-radius: 16px; box-shadow: 0 2px 10px #f2dabc50;}
    @media (max-width:1000px) {
      .mainwrap, .container { width: 99vw; height: 99vh; min-width: 360px; min-height: 400px;}
      .chartwrap { width: 96vw;}
    }
  </style>
</head>
<body>
<div class="mainwrap">
<div class="container" id="maincont">
  <h1>🔎 Veri Dedektifi Oyunu</h1>
  <div id="step1" class="show">
    <h2>1. Problemi Anlama ve Doğru Soru Sorma</h2>
    <p>Bir haftalık veri var. Sence aşağıdaki sorulardan hangisi veriye uygun problem tanımı olur?</p>
    <form id="qform1">
      <label><input type="radio" name="soru1" value="A"> Bu veriler neyi gösteriyor?</label>
      <label><input type="radio" name="soru1" value="B"> Bir haftada hangi gün en fazla değer gerçekleşmiştir?</label>
      <label><input type="radio" name="soru1" value="C"> Veri toplamak neden önemlidir?</label>
      <button type="submit">Kontrol Et</button>
    </form>
    <div id="result1"></div>
  </div>
  <div id="step2" class="hide">
    <h2>2. Veriyi Anlama</h2>
    <div class="card">
      <b>Veri tablosu:</b>
      <table>
        <thead><tr><th>Gün</th><th>Değer</th></tr></thead>
        <tbody id="datatable"></tbody>
      </table>
    </div>
    <div class="card">
      <b>Soru:</b> Kaç satır var? Kaç sütun var? Hangi değişkenler var? Türleri nedir?
    </div>
    <button onclick="showStruct()">Cevabı Göster</button>
    <div id="structAns" class="hide">
      <ul>
        <li><b>Satır:</b> 7</li>
        <li><b>Sütun:</b> 2 (Gün, Değer)</li>
        <li><b>Gün:</b> Kategorik (hafta günleri)</li>
        <li><b>Değer:</b> Sayısal (adım sayısı vb.)</li>
      </ul>
    </div>
  </div>
  <div id="step3" class="hide">
    <h2>3. Eksik ve Uç Değer Bulma</h2>
    <p>Tabloda bir eksik, bir de çok yüksek (uç) değer var. Seç bakalım!</p>
    <form id="qform3">
      <label>Eksik gün:
        <select id="missing"><option value="">Seçiniz</option></select>
      </label>
      <label>Uç değer gün:
        <select id="outlier"><option value="">Seçiniz</option></select>
      </label>
      <button type="submit">Kontrol Et</button>
    </form>
    <div id="result3"></div>
  </div>
  <div id="step4" class="hide">
    <h2>4. İstatistiksel Ölçüler</h2>
    <p>Eksik ve uç değerleri çıkardıktan sonra min, maks, ortalama, medyan ve mod değerlerini bul.</p>
    <button onclick="showStats()">Cevabı Göster</button>
    <ul id="statsAns" class="hide"></ul>
  </div>
  <div id="step5" class="hide">
    <h2>5. Veri Görselleştirme</h2>
    <p>Eksik ve uç değerler olmadan, haftalık veriyi grafikte göster:</p>
    <div class="chartwrap"><canvas id="barChart" width="380" height="190"></canvas></div>
    <button onclick="step(6)">Sonraki Görev</button>
  </div>
  <div id="step6" class="hide">
    <h2>6. Modelleme ve Yorumlama</h2>
    <p>Sistem model oluşturdu. Aşağıdaki yorumlardan hangisi veriye en uygunudur?</p>
    <form id="qform6">
      <label><input type="radio" name="yorum" value="A"> Tüm günler eşit dağılım gösteriyor.</label>
      <label><input type="radio" name="yorum" value="B"> Hafta içinde genel olarak artış eğilimi var ama cuma günü uç değer bozucu etkide.</label>
      <label><input type="radio" name="yorum" value="C"> Veri setinde hiçbir örüntü yok.</label>
      <button type="submit">Kontrol Et</button>
    </form>
    <div id="result6"></div>
  </div>
  <div id="step7" class="hide">
    <h2>Tebrikler! Oyunu Tamamladın 🎉</h2>
    <div class="card">
      Başarılı bir veri dedektifi oldun! <br>
      Yeniden oynamak ister misin?
    </div>
    <button onclick="window.location.reload()">Yeniden Oyna</button>
  </div>
  <div class="score">Skor: <span id="score">0</span></div>
</div>
</div>
<script>
const data = [
  { day: "Pzt", value: 20 },
  { day: "Salı", value: 25 },
  { day: "Çrş", value: null },
  { day: "Prş", value: 35 },
  { day: "Cuma", value: 60 },
  { day: "Cts", value: 40 },
  { day: "Pazar", value: 30 }
];
let score = 0;
function step(n) {
  for (let i=1;i<=7;i++) {
    document.getElementById("step"+i).classList.add("hide");
    document.getElementById("step"+i).classList.remove("show");
  }
  document.getElementById("step"+n).classList.remove("hide");
  setTimeout(()=>document.getElementById("step"+n).classList.add("show"),30);
  document.getElementById("score").textContent = score;
  if (n === 2) fillTable();
  if (n === 3) fillSelects();
  if (n === 5) drawChart();
}
function addScore(val) {
  score += val; document.getElementById("score").textContent = score;
}
function fillTable() {
  let t = ""; data.forEach(d=>t+=`<tr><td>${d.day}</td><td>${d.value==null?"?" : d.value}</td></tr>`);
  document.getElementById("datatable").innerHTML = t;
}
function fillSelects() {
  let opt = "<option value=''>Seçiniz</option>";
  data.forEach(d=>{ opt+=`<option value='${d.day}'>${d.day}</option>`; });
  document.getElementById("missing").innerHTML = opt;
  document.getElementById("outlier").innerHTML = opt;
}
// Görev 1 - Problemi anlama
document.getElementById("qform1").onsubmit = function(e) {
  e.preventDefault();
  const val = document.querySelector("input[name=soru1]:checked")?.value;
  const result = document.getElementById("result1");
  if (val === "B") {
    result.innerHTML = "<span class='correct'>Doğru! Problemi anlamak için doğru soruyu sordun.</span>";
    addScore(10); setTimeout(()=>step(2),900);
  } else {
    result.innerHTML = "<span class='wrong'>Yanlış. Problemi anlamak için veriye yönelik soru sormalısın.</span>";
  }
};
// Görev 3 - Eksik/aykırı değer
document.getElementById("qform3").onsubmit = function(e) {
  e.preventDefault();
  const missing = document.getElementById("missing").value;
  const outlier = document.getElementById("outlier").value;
  const result = document.getElementById("result3");
  if (missing === "Çrş" && outlier === "Cuma") {
    result.innerHTML = "<span class='correct'>Tebrikler! Eksik ve uç değeri doğru buldun.</span>";
    addScore(15); setTimeout(()=>step(4),1000);
  } else {
    result.innerHTML = "<span class='wrong'>Yanlış cevap. Eksik olan Çrş, uç değer ise Cuma.</span>";
  }
};
// Görev 4 - İstatistik
function showStats() {
  // eksik ve uç (60) değer hariç: 20,25,35,40,30
  const vals = [20,25,35,40,30];
  const min = Math.min(...vals), max = Math.max(...vals);
  const mean = Math.round(vals.reduce((a,b)=>a+b,0)/vals.length);
  const medyan = vals.slice().sort((a,b)=>a-b)[Math.floor(vals.length/2)];
  const mod = vals.sort((a,b) => vals.filter(v=>v===a).length-vals.filter(v=>v===b).length).pop();
  const s = document.getElementById("statsAns");
  s.innerHTML = `<li>Min: <b>${min}</b></li>
    <li>Maks: <b>${max}</b></li>
    <li>Ortalama: <b>${mean}</b></li>
    <li>Medyan: <b>${medyan}</b></li>
    <li>Mod: <b>${mod}</b></li>`;
  s.classList.remove("hide");
  addScore(15); setTimeout(()=>step(5),1000);
}
// Görev 2 - Veri yapısı
function showStruct() {
  document.getElementById("structAns").classList.remove("hide");
  addScore(10); setTimeout(()=>step(3),900);
}
// Görev 5 - Grafik
function drawChart() {
  const ctx = document.getElementById('barChart').getContext('2d');
  if(window.bar) window.bar.destroy();
  window.bar = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: data.map(d=>d.day),
      datasets: [{
        label: "Veri (eksikler ve uç değerler hariç)",
        data: data.map(d=>d.value==null||d.value==60?null:d.value),
        backgroundColor: "#fae1a1"
      }]
    },
    options: {
      plugins: { legend: {display: false}},
      scales: { y: { beginAtZero:true } }
    }
  });
}
// Görev 6 - Model yorum
document.getElementById("qform6").onsubmit = function(e) {
  e.preventDefault();
  const val = document.querySelector("input[name=yorum]:checked")?.value;
  const result = document.getElementById("result6");
  if (val === "B") {
    result.innerHTML = "<span class='correct'>Doğru! Verinin genel eğilimini doğru yorumladın.</span>";
    addScore(20); setTimeout(()=>step(7),1100);
  } else {
    result.innerHTML = "<span class='wrong'>Yanlış. Tekrar dene!</span>";
  }
};
// ilk adımı başlat
step(1);
</script>
</body>
</html>

