<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=960, initial-scale=1.0"/>
  <title>Veri Bilimi Oyunu: Su Takibi</title>
  <style>
    html, body { height:100%; margin:0; padding:0; }
    body {
      background: #f4f8fb;
      display: flex; align-items: center; justify-content: center;
      min-height: 100vh;
    }
    .container {
      width: 960px; height: 540px;
      background: #fff;
      border-radius: 24px;
      box-shadow: 0 4px 32px #9fc3f944;
      display: flex; flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 32px 28px 16px 28px;
      box-sizing: border-box;
    }
    h1 { text-align: center; color: #2368b8; font-size: 2.3rem; margin:0 0 8px 0;}
    h2 { color: #2368b8; margin-bottom: 10px; margin-top: 0;}
    .data-table { width: 370px; border-collapse: collapse; margin-bottom: 18px;}
    th, td { border: 1px solid #dde; padding: 8px 6px; text-align: center; }
    th { background: #f4f8fb;}
    .btn { background: #2368b8; color: #fff; border: none; padding: 10px 26px; border-radius: 12px; font-weight: 500; cursor:pointer; margin: 10px 0 0 0; font-size: 1.1em;}
    .btn:active { background: #174782;}
    .hide { display: none; }
    .step { width: 100%; max-width: 520px; margin:0 auto; }
    .input-area { margin: 14px 0 6px 0;}
    .answer { font-weight: bold; color: #23c486; margin-top:3px;}
    .error { color:#ff3030; font-weight:500; }
    textarea { width: 99%; border-radius: 9px; border:1px solid #dde; padding:8px; min-height:60px; font-size:1.03em;}
    .chart-bar { background: #e4eefd; height: 20px; border-radius: 10px; margin-bottom: 5px; display: flex; align-items: center;}
    .bar-label { min-width: 90px; text-align: right; margin-right: 10px; }
    .bar-fill { height: 20px; border-radius: 10px; }
    .mb-8 {margin-bottom:8px;}
    .mt-4 {margin-top:18px;}
    .mx-auto {margin-left:auto;margin-right:auto;}
    .table-wrapper { width:100%; display:flex; justify-content:center;}
    @media (max-width: 1020px) {
      .container { width:99vw; height:auto; min-width:320px;}
      .data-table { width: 97vw; font-size:0.96em;}
      .step {max-width:99vw;}
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Veri Bilimi Oyunu: Su Takibi</h1>
    <div class="table-wrapper">
      <table class="data-table mx-auto">
        <tr><th>Gün</th><th>İçilen Su (ml)</th></tr>
        <tr><td>Pazartesi</td><td>1000</td></tr>
        <tr><td>Salı</td><td>1200</td></tr>
        <tr><td>Çarşamba</td><td>900</td></tr>
        <tr><td>Perşembe</td><td>1500</td></tr>
        <tr><td>Cuma</td><td>800</td></tr>
        <tr><td>Cumartesi</td><td>1800</td></tr>
        <tr><td>Pazar</td><td>700</td></tr>
      </table>
    </div>

    <!-- Adım 1: Senaryo ve Tablo -->
    <div id="step1" class="step">
      <h2>Adım 1: Veriyi İncele</h2>
      <p>Can, sağlıklı olmak için bir hafta boyunca her gün içtiği su miktarını kaydetti. Aşağıda günlere göre içtiği su miktarını görüyorsun.</p>
      <button class="btn" onclick="showStep(2)">Başla</button>
    </div>

    <!-- Adım 2: En fazla hangi gün -->
    <div id="step2" class="step hide">
      <h2>Adım 2: En Fazla Su İçilen Günü Bul</h2>
      <p>Can en çok hangi gün su içmiştir? (Günü yaz)</p>
      <div class="input-area">
        <input type="text" id="maxInput" placeholder="Gün adı yaz (örn: Cumartesi)" style="padding:6px 8px; border-radius:8px; border:1px solid #bbb; width: 200px;" />
        <button class="btn" onclick="checkMax()">Cevabı Kontrol Et</button>
      </div>
      <div id="maxFeedback"></div>
    </div>

    <!-- Adım 3: En az hangi gün -->
    <div id="step3" class="step hide">
      <h2>Adım 3: En Az Su İçilen Günü Bul</h2>
      <p>Can en az hangi gün su içmiştir? (Günü yaz)</p>
      <div class="input-area">
        <input type="text" id="minInput" placeholder="Gün adı yaz (örn: Pazar)" style="padding:6px 8px; border-radius:8px; border:1px solid #bbb; width: 200px;" />
        <button class="btn" onclick="checkMin()">Cevabı Kontrol Et</button>
      </div>
      <div id="minFeedback"></div>
    </div>

    <!-- Adım 4: Ortalama harcama -->
    <div id="step4" class="step hide">
      <h2>Adım 4: Ortalama Su Miktarını Hesapla</h2>
      <p>Can bir günde ortalama kaç ml su içmiştir? (Tam sayı olarak yaz)</p>
      <div class="input-area">
        <input type="number" id="avgInput" placeholder="Ortalama (ml)" style="padding:6px 8px; border-radius:8px; border:1px solid #bbb; width: 120px;" />
        <button class="btn" onclick="checkAvg()">Cevabı Kontrol Et</button>
      </div>
      <div id="avgFeedback"></div>
    </div>

    <!-- Adım 5: Hedefin Altında Kalan Günler -->
    <div id="step5" class="step hide">
      <h2>Adım 5: Hedefin Altında Kalan Günler</h2>
      <p>Günlük hedef 1500 ml. Can bu hedefin altında kaç gün kalmıştır? (Sayısal olarak yaz)</p>
      <div class="input-area">
        <input type="number" id="belowInput" placeholder="Gün sayısı" style="padding:6px 8px; border-radius:8px; border:1px solid #bbb; width: 120px;" />
        <button class="btn" onclick="checkBelow()">Cevabı Kontrol Et</button>
      </div>
      <div id="belowFeedback"></div>
    </div>

    <!-- Adım 6: Modelleme - Tahmin -->
    <div id="step6" class="step hide">
      <h2>Adım 6: Modelleme ve Tahmin</h2>
      <p>Can, Cumartesi günü genellikle çok su içiyor. Sence bir sonraki Cumartesi günü kaç ml su içebilir? (Tahminini yaz)</p>
      <div class="input-area">
        <input type="number" id="modelInput" placeholder="Tahmin (ml)" style="padding:6px 8px; border-radius:8px; border:1px solid #bbb; width: 120px;" />
        <button class="btn" onclick="checkModel()">Tahmini Kontrol Et</button>
      </div>
      <div id="modelFeedback"></div>
    </div>

    <!-- Adım 7: Görsel Bar Chart -->
    <div id="step7" class="step hide">
      <h2>Adım 7: Haftalık Su Tüketimi Grafiği</h2>
      <div>Can'ın haftalık su tüketimi aşağıdaki gibidir:</div>
      <div id="chartArea" class="mt-4"></div>
      <button class="btn" onclick="showStep(8)">Sonraki</button>
    </div>

    <!-- Adım 8: Yansıtıcı Soru -->
    <div id="step8" class="step hide">
      <h2>Adım 8: Düşün ve Yaz</h2>
      <p>
        Eğer sen Can'ın yerinde olsaydın, <b>daha fazla su içmek için</b> neler yapardın? Hedefin olan 1500 ml'ye ulaşmak için kendi önerini yaz!
      </p>
      <textarea id="reflection" placeholder="Cevabını buraya yazabilirsin..."></textarea>
      <button class="btn" onclick="showResult()">Oyunu Bitir</button>
    </div>

    <!-- Sonuç -->
    <div id="result" class="step hide">
      <h2>Tebrikler!</h2>
      <p>Veriyi analiz ettin, tahmin yaptın ve çözüm önerini sundun.</p>
      <p><b>Cevabın:</b></p>
      <div id="finalReflection" style="background:#f4f8fb; padding:10px; border-radius:8px; margin-bottom:8px;"></div>
      <button class="btn" onclick="restartGame()">Tekrar Oyna</button>
    </div>
  </div>
  <script>
    // Türkçe günler ve veri
    const data = [
      { gun: "Pazartesi", su: 1000 },
      { gun: "Salı", su: 1200 },
      { gun: "Çarşamba", su: 900  },
      { gun: "Perşembe", su: 1500 },
      { gun: "Cuma", su: 800  },
      { gun: "Cumartesi", su: 1800 },
      { gun: "Pazar", su: 700  }
    ];
    const hedef = 1500;

    function showStep(step) {
      for (let i = 1; i <= 8; i++) document.getElementById("step"+i).classList.add("hide");
      document.getElementById("result").classList.add("hide");
      if(step === 7) drawChart();
      document.getElementById("step"+step).classList.remove("hide");
    }

    function normalize(str) {
      return str.trim().toLowerCase().replace("i̇", "i"); // Türkçeye özel harf düzeltmesi
    }

    function checkMax() {
      const input = normalize(document.getElementById("maxInput").value);
      const correct = "cumartesi";
      let feedback;
      if (input === correct) {
        feedback = `<span class="answer">Doğru! Cumartesi günü Can en çok su içti. (1800 ml)</span>
        <br><button class="btn" onclick="showStep(3)">Sonraki Adım</button>`;
      } else {
        feedback = `<span class="error">Yanlış. Tekrar dene! (Cevap: Cumartesi)</span>`;
      }
      document.getElementById("maxFeedback").innerHTML = feedback;
    }

    function checkMin() {
      const input = normalize(document.getElementById("minInput").value);
      const correct = "pazar";
      let feedback;
      if (input === correct) {
        feedback = `<span class="answer">Doğru! Pazar günü Can en az su içti. (700 ml)</span>
        <br><button class="btn" onclick="showStep(4)">Sonraki Adım</button>`;
      } else {
        feedback = `<span class="error">Yanlış. Tekrar dene! (Cevap: Pazar)</span>`;
      }
      document.getElementById("minFeedback").innerHTML = feedback;
    }

    function checkAvg() {
      const input = Number(document.getElementById("avgInput").value);
      const correct = Math.round(data.reduce((acc, d) => acc + d.su, 0) / data.length);
      let feedback;
      if (input === correct) {
        feedback = `<span class="answer">Doğru! Ortalama ${correct} ml.</span>
        <br><button class="btn" onclick="showStep(5)">Sonraki Adım</button>`;
      } else {
        feedback = `<span class="error">Yanlış. Doğru cevap: ${correct} ml. Tekrar deneyebilirsin.</span>`;
      }
      document.getElementById("avgFeedback").innerHTML = feedback;
    }

    function checkBelow() {
      const input = Number(document.getElementById("belowInput").value);
      const correct = data.filter(d => d.su < hedef).length;
      let feedback;
      if (input === correct) {
        feedback = `<span class="answer">Doğru! ${correct} gün hedefin altında kalındı.</span>
        <br><button class="btn" onclick="showStep(6)">Sonraki Adım</button>`;
      } else {
        feedback = `<span class="error">Yanlış. Doğru cevap: ${correct} gün. Tekrar dene!</span>`;
      }
      document.getElementById("belowFeedback").innerHTML = feedback;
    }

    function checkModel() {
      const input = Number(document.getElementById("modelInput").value);
      const correct = data[5].su; // Cumartesi
      let feedback;
      if (Math.abs(input - correct) <= 150) {
        feedback = `<span class="answer">Çok iyi tahmin! Gerçek değer: ${correct} ml.</span>
        <br><button class="btn" onclick="showStep(7)">Sonraki Adım</button>`;
      } else {
        feedback = `<span class="error">Gerçek cevap: ${correct} ml. Tekrar deneyebilirsin!</span>`;
      }
      document.getElementById("modelFeedback").innerHTML = feedback;
    }

    function drawChart() {
      const maxSu = Math.max(...data.map(d=>d.su));
      const chartArea = document.getElementById("chartArea");
      chartArea.innerHTML = '';
      data.forEach(d => {
        const width = Math.round(280 * d.su / maxSu);
        const color = d.su >= hedef ? "#23c486" : "#2368b8";
        chartArea.innerHTML += `
          <div class="chart-bar">
            <div class="bar-label">${d.gun}</div>
            <div class="bar-fill" style="background:${color}; width:${width}px"></div>
            <div style="margin-left:7px; font-size:.99em;">${d.su} ml</div>
          </div>
        `;
      });
    }

    function showResult() {
      document.getElementById("step8").classList.add("hide");
      document.getElementById("result").classList.remove("hide");
      document.getElementById("finalReflection").textContent = document.getElementById("reflection").value || "(Yanıt yok)";
    }

    function restartGame() {
      document.getElementById("reflection").value = "";
      showStep(1);
      document.getElementById("maxInput").value = "";
      document.getElementById("maxFeedback").innerHTML = "";
      document.getElementById("minInput").value = "";
      document.getElementById("minFeedback").innerHTML = "";
      document.getElementById("avgInput").value = "";
      document.getElementById("avgFeedback").innerHTML = "";
      document.getElementById("belowInput").value = "";
      document.getElementById("belowFeedback").innerHTML = "";
      document.getElementById("modelInput").value = "";
      document.getElementById("modelFeedback").innerHTML = "";
    }

    // Oyunu başlat
    showStep(1);
  </script>
</body>
</html>
